# Data Model

**Feature**: In-Memory Python Console Todo Application
**Branch**: 001-todo-console
**Date**: 2025-12-27
**Version**: 1.0

---

## Overview

This document defines the data model for Phase I of the In-Memory Python Console Todo Application. All data is stored in memory and lost upon program termination.

---

## Entity: Task

### Description

Represents a todo item with auto-generated unique identifier, required title, optional description, and completion status.

### Fields

| Field        | Type    | Required | Description                          | Default | Validation                    |
|-------------|----------|-----------|----------------------------------------|----------|--------------------------------|
| id          | int      | Yes       | Auto-generated unique identifier          | Auto     | Positive integer, unique          |
| title       | str      | Yes       | Short task title                       | N/A      | Non-empty after trimming whitespace |
| description | str      | No        | Optional details                       | None      | None or non-empty string        |
| completed   | bool     | Yes       | Completion status                      | False     | True/False only                |

### Field Definitions

**id**
- Auto-generated by TaskService starting from 1
- Incremented by 1 for each new task
- Unique within a single session
- Used for user to identify tasks in CLI

**title**
- Required field, cannot be empty or whitespace-only
- Maximum length: 200 characters (practical limit for console display)
- Trailing/leading whitespace trimmed on input

**description**
- Optional field
- Can be None or non-empty string
- Maximum length: 500 characters
- Empty string treated as None

**completed**
- Boolean completion status
- Default: False (new tasks start incomplete)
- Toggled via "Mark Complete/Incomplete" feature

---

## State Transitions

```
[New Task Created]
       ↓
   [Incomplete] ← Default State
       ↓ [User toggles complete]
   [Complete]
       ↓ [User toggles complete]
   [Incomplete]
```

### Transition Rules

1. **New Task**: Always starts with `completed = False`
2. **Toggle**: Inverts current value (False ↔ True)
3. **Update**: Does not affect completion status (unless explicitly toggled)
4. **Delete**: Task removed from in-memory store, state lost

---

## Relationships

**Task** entity has no relationships with other entities in Phase I.

- Single-user application (no sharing or collaboration)
- No external entities or foreign keys
- Self-contained within application lifecycle

---

## In-Memory Storage Strategy

### Storage Implementation

```python
class TaskService:
    def __init__(self):
        self._tasks: List[Task] = []  # In-memory list
        self._next_id: int = 1           # Auto-increment counter
```

### Storage Characteristics

- **Lifetime**: Equals program runtime
- **Persistence**: None (violates constitution if added)
- **Access Pattern**: Sequential access (list iteration) is primary
- **Expected Size**: <100 tasks (typical single-user session)

### Operations

- **Create**: O(1) - append to end of list
- **Read All**: O(n) - iterate full list (display to user)
- **Find by ID**: O(n) - linear search (acceptable for n < 100)
- **Update by ID**: O(n) - search + modify
- **Delete by ID**: O(n) - search + remove

### Rationale for List vs Dictionary

**List Chosen Because**:
- Maintains insertion order (users expect tasks listed by creation)
- Simple and idiomatic for Python
- O(n) operations acceptable for expected task count (<100)

**Dictionary Rejected Because**:
- Loses ordering (Python 3.6+ maintains insertion order, but list is more explicit)
- Slightly more complex for iteration display
- No significant performance benefit at small scale

---

## Validation Rules

### Entity-Level Validation

1. **Title Validation**
   - Cannot be None
   - Cannot be empty string after `strip()`
   - Maximum 200 characters
   - Leading/trailing whitespace trimmed

2. **ID Validation**
   - Must be positive integer (>0)
   - Must exist in task store for update/delete/toggle operations
   - Validation performed by TaskService, not Task entity

3. **Description Validation**
   - Can be None
- Can be non-empty string
   - Cannot be empty string (convert to None if empty after strip)
   - Maximum 500 characters

4. **Completed Validation**
   - Must be boolean (True/False)
   - No additional validation

### Service-Level Validation

TaskService performs:
- ID existence checks before update/delete/toggle
- Title non-empty validation on task creation
- Raises `ValueError` with human-readable messages on validation failures

---

## Data Integrity Rules

1. **Uniqueness**: IDs are guaranteed unique within a session
2. **Immutability**: Task ID never changes after creation
3. **Consistency**: All Task objects stored with valid field values
4. **State Loss**: All tasks lost when program terminates (mandated by constitution)

---

## Future Considerations (Out of Scope for Phase I)

- **Persistence**: Adding database, file storage, or serialization (blocked by constitution)
- **Task Relationships**: Subtasks, tags, categories (future phases)
- **Priority/Deadlines**: Advanced task attributes (future phases)
- **Multi-User**: Sharing, permissions, collaboration (future phases)

---

## Example Task Instances

```python
# Task 1 - Minimal
Task(id=1, title="Buy groceries", description=None, completed=False)

# Task 2 - With description
Task(id=2, title="Write documentation", description="Complete API docs", completed=False)

# Task 3 - Completed
Task(id=3, title="Call client", description="Discuss project timeline", completed=True)
```
